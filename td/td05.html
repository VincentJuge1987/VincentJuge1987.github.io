<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Boucles et fonctions en Javascript</title>
<link rel="stylesheet" type="text/css" href="css/stylesheet-td.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/printstylesheet.css" media="print">
<link rel="stylesheet" type="text/css" href="css/sh_ide-eclipse.css">
</head>
<body>
  <div class="conteneur">
    <div class="contenu">
      <table>
        <tbody>
          <tr style="vertical-align: center;">
            <td><img class="print" src="css/UGE.png" alt="[LOGO]" height="30"></td>
            <td><h1>Boucles et fonctions en Javascript</h1></td>
          </tr>
        </tbody>
      </table>
      <hr>

      <div>Comme pour les TPs précédents, on vous demande de créer un
        répertoire <span class="tt">tp5</span> qui contiendra les exercices de cette feuille de TP et de
        faire un compte rendu de TP en HTML.</div>
      <br>

      <h3>Exercice 1&nbsp;: Affichage de formes dans la console</h3>
      <div>On cherche à afficher des formes simples <span class="caution">dans la console</span>.</div>
      <ol start="0">
        <li>Recopiez la page Web <a href="src/td05/exo1.html">exo1.html</a> dans votre répertoire <span class="tt">tp5</span>.
        </li>
        <li>On souhaite afficher des croix qui formeront un triangle rectangle isocèle.
          La fonction <span class="tt">triangleRectangle(n)</span> doit permettre d'afficher un tel triangle de côté <span class="tt">n</span>.
          <br>
          Par exemple, <span class="tt">triangleRectangle(4)</span> permet d'afficher les lignes
          <br>
          <pre class="full-width tt">.<br>..<br>...<br>....</pre>
          Remplir le corps de la fonction <span class="tt">triangleRectangle</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">n<span>.
        </li>
        <li>On souhaite maintenant disposer d'un triangle isocèle dont l'axe de symétrie est vertical.
          La fonction <span class="tt">triangleIsocèle(n)</span> doit permettre d'afficher un tel triangle de hauteur <span class="tt">n</span> et de base <span class="tt">2n-1</span>.
          <br>
          Par exemple, <span class="tt">triangleIsocèle(4)</span> permet d'afficher les lignes
          <br>
          <pre class="full-width tt">   .<br>  ...<br> .....<br>.......</pre>
          Remplir le corps de la fonction <span class="tt">triangleIsocèle</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">n<span>.
        </li>
        <li>On souhaite ensuite disposer d'un rectangle.
          La fonction <span class="tt">rectangle(a,b)</span> doit permettre d'afficher un tel rectangle de hauteur <span class="tt">a</span> et de largeur <span class="tt">b</span>, sans compter les cases occupées par les bords du rectangle.
          <br>
          Par exemple, <span class="tt">rectangle(4,6)</span> permet d'afficher les lignes
          <br>
          <pre class="full-width tt">+------+<br>|      |<br>|      |<br>|      |<br>|      |<br>+------+</pre>
          Remplir le corps de la fonction <span class="tt">rectangle</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">a<span> et <span class="tt">b<span>.
        </li>
        <li>On souhaite enfin disposer d'un carré.
          La fonction <span class="tt">carré(n)</span> doit permettre d'afficher un tel carré de côté <span class="tt">n</span>, sans compter les cases occupées par les bords du carré.
          <br>
          Par exemple, <span class="tt">carré(4)</span> permet d'afficher les lignes
          <br>
          <pre class="full-width tt">+----+<br>|    |<br>|    |<br>|    |<br>|    |<br>+----+</pre>
          Remplir le corps de la fonction <span class="tt">carré</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">n<span>.
        </li>
        <li>Le corps de la fonction <span class="tt">carré</span> doit prendre au plus une ligne, facile à lire et à comprendre.
        Si ce n'est pas le cas, commentez votre code et réécrivez la fonction <span class="tt">carré</span> de sorte à satisfaire cette nouvelle contrainte.
        </li>
      </ol>

      <h3>Exercice 2&nbsp;: Affichage de formes dans la console, le retour</h3>
      <div>
        On souhaite aboutir au même résultat qu'à l'exercice précédent, mais en utilisant des fonctions <i>ad hoc</i> plutôt que <span class="tt">console.log</span>.
        <br>
        Ces fonctions, créées uniquement pour les besoins de ce TP, sont :
        <ul>
          <li><span class="tt">print(s)</span>, qui permet d'afficher <span class="caution">un seul caractère</span> (stocké dans une chaîne de caractères <span class="tt">s</span>) dans la console <span class="caution">et ne revient pas à la ligne</span>&nbsp;;</li>
          <li><span class="tt">newLine()</span>, qui permet de revenir à la ligneligne</span>&nbsp;;</li>
        </ul>
        <span class="caution">Attention&nbsp;!</span> Donner comme argument à la fonction <span class="tt">print</span> une chaîne de caractères contenant autre chose qu'un unique caractère déclenchera une erreur.
        <br>
        <span class="caution">Attention&nbsp;!</span> Tenter d'appeler directement la fonction <span class="tt">console.log()</span> déclenchera une erreur.
      </div>
      <ol start="0">
        <li>Recopiez la page Web <a href="src/td05/exo2.html">exo2.html</a> dans votre répertoire <span class="tt">tp5</span>.
        </li>
        <li>On souhaite afficher des croix qui formeront un triangle rectangle isocèle.
          La fonction <span class="tt">triangleRectangle(n)</span> doit permettre d'afficher un tel triangle de côté <span class="tt">n</span>.
          <br>
          Remplir le corps de la fonction <span class="tt">triangleRectangle</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">n<span>.
          On n'oubliera pas de faire un appel à <span class="tt">newLine()</span> à la fin de <span class="caution">chaque</span> ligne, <span class="caution">y compris la dernière</span>.
        </li>
        <li>On souhaite maintenant disposer d'un triangle isocèle dont l'axe de symétrie est vertical.
          La fonction <span class="tt">triangleIsocèle(n)</span> doit permettre d'afficher un tel triangle de hauteur <span class="tt">n</span> et de base <span class="tt">2n-1</span>.
          <br>
          Remplir le corps de la fonction <span class="tt">triangleIsocèle</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">n<span>.
        </li>
        <li>On souhaite ensuite disposer d'un rectangle.
          La fonction <span class="tt">rectangle(a,b)</span> doit permettre d'afficher un tel rectangle de hauteur <span class="tt">a</span> et de largeur <span class="tt">b</span>, sans compter les cases occupées par les bords du rectangle.
          <br>
          Remplir le corps de la fonction <span class="tt">rectangle</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">a<span> et <span class="tt">b<span>.
        </li>
        <li>On souhaite enfin disposer d'un carré.
          La fonction <span class="tt">carré(n)</span> doit permettre d'afficher un tel carré de côté <span class="tt">n</span>, sans compter les cases occupées par les bords du carré.
          <br>
          Remplir le corps de la fonction <span class="tt">carré</span> de manière adéquate puis la tester avec plusieurs valeurs de <span class="tt">n<span>.
          Ce corps de fonction doit prendre au plus une ligne, facile à lire et à comprendre.
        </li>
      </ol>
    
      <h3>Exercice 3&nbsp;: Le lièvre et la tortue</h3>
      <div>
        Le lièvre et la tortue font la course&nbsp;: la tortue avance souvent, mais peu à chaque fois, tandis que le lièvre avance rarement, mais beaucoup à chaque fois.
        On souhaite modéliser leur course en utilisant un <a href="https://fr.wikipedia.org/wiki/D%C3%A9_%C3%A0_vingt_faces">dé à 20 faces</a>&nbsp;:
        <ul>
          <li>On lance le dé, et on note <span class="tt">n</span> son résultat&nbsp;;</li>
          <li>Si <span class="tt">n</span> vaut 14 ou moins, c'est la tortue qui avance de <span class="tt">n</span>&nbsp;;</li>
          <li>Si, au contraire, <span class="tt">n</span> vaut 15 ou plus, c'est le lièvre qui avance de <span class="tt">n</span>.
        </ul>
        Le premier qui franchit la ligne d'arrivée a gagné le droit de voir son histoire immortalisée dans une fable de La Fontaine.
      </div>
      <ol start="0">
        <li>Recopiez la page Web <a href="src/td05/exo3.html">exo3.html</a> dans votre répertoire <span class="tt">tp5</span>.
        <li>
          Écrire une fonction <span class="tt">uniforme(borne)</span> qui prend en argument un entier <span class="tt">borne</span> strictement positif et renvoie un entier choisi <a href="https://fr.wikipedia.org/wiki/Loi_uniforme_discr%C3%A8te">uniformément au hasard</a> parmi 1, 2, &hellip;, <span class="tt">borne</span>.
        </li>
        <li id="step3">
          Écrire une fonction <span class="tt">étape()</span> qui simule un lancer de dé et son effet sur les positions du lièvre et de la tortue&nbsp;:
          <ul>
            <li>elle lance le dé pour obtenir un entier <span class="tt">n</span> entre 1 et 20&nbsp;;</li>
            <li>elle renvoie un tableau <span class="tt">résultat</span> de taille 2, tel que <span class="tt">résultat[0]</span> soit l'avancée du lièvre et <span class="tt">résultat[1]</span> soit l'avancée de la tortue <span class="caution">juste après le lancer de dé</span>&nbsp;:
            ainsi, <span class="tt">résultat</span> vaut <span class="tt">[0,n]</span> si <span class="tt">n</span> vaut 14 ou moins, et <span class="tt">[n,0]</span> si <span class="tt">n</span> vaut 15 ou plus</li>
          </ul>
        </li>
        <li>
          Écrire une fonction <span class="tt">course(l)</span> qui simule une course de longueur <span class="tt">l</span> entre le lièvre et la tortue, et renvoie <span class="tt">"lièvre"</span> si le lièvre a gagné la course, ou <span class="tt">"tortue"</span> si la tortue a gagné la course.
        </li>
        <li>
          Organiser 10000 courses de longueur 5000. Parmi le lièvre et la tortue, y en a-t-il un qui semble gagner beaucoup plus souvent que l'autre&nbsp;?
          <br>
          <span class="caution">Pour les amateurs de mathématiques&nbsp;:</span> comment aurait-on pu, ne serait-ce qu'intuitivement, prévoir un tel résultat&nbsp;?
        </li>
      </ol>
    
      <h3>Exercice 4&nbsp;: Une fable fonctionnelle</h3>
      <div>
        Le lièvre s'ennuie un peu&nbsp;: ses courses avec la tortue se ressemblent toutes&nbsp;!
        Il souhaite donc tenter deux expériences.
        <br>
        Dans la première, on lance <span class="tt">dice</span> dés en même temps, on note <span class="tt">n</span> la somme des résultats des dés, puis la tortue avance de <span class="tt">n</span> si <span class="tt">n</span> est strictement plus petit que 15 &times; <span class="tt">dice</span>, tandis que le lièvre avant de <span class="tt">n</span> sinon.
        <br>
        Dans la deuxième expérience, le lièvre joue avec un dé truqué&nbsp;: la probabilité de tomber sur un entier <span class="tt">n</span> donné doit être proportionnel à <span class="tt">prob(n)</span>, où <span class="tt">prob</span> est une fonction à valeurs réelles positives ou nulles.
      </div>
      <ol start="0">
        <li>Recopiez la page Web <a href="src/td05/exo3.html">exo4.html</a> dans votre répertoire <span class="tt">tp5</span>.</li>
      </ol>
      On tente ici de réaliser la première expérience.
      <ol start="1">
        <li>
          Écrire une fonction <span class="tt">sumd20(dice)</span> qui simule le lancer de <span class="tt">dice</span> dés équilibrés à 20 faces, et renvoie la somme de leurs résultats.
        </li>
        <li>
          La tortue décide de changer le seuil à partir duquel le lièvre avancera&nbsp; à l'exercice précédent, ce seuil était le nombre 15.
          <br>
          Écrire une fonction <span class="tt">seuil(n,val)</span> qui, étant donnés deux entiers <span class="tt">n</span> et <span class="tt">val</span>, renvoie le tableau <span class="tt">[0,n]</span> si <span class="tt">n</span> &lt; <span class="tt">val</span>, et le tableau <span class="tt">[n,0]</span> sinon.
        </li>
        <li>
          Écrire une fonction <span class="tt">étape2(dice)</span> qui, dans la première expérience, simule le lancer de <span class="tt">dice</span> dés à 20 faces, et l'impact du résultat de ce lancer de dés sur l'avancée du lièvre et de la tortue.
          <br>
          Cette fonction doit un tableau <span class="tt">résultat</span> de taille 2, tel que <span class="tt">résultat[0]</span> soit l'avancée du lièvre et <span class="tt">résultat[1]</span> soit l'avancée de la tortue <span class="caution">juste après le lancer de dé</span>.
        </li>
        <li>
          Discuter l'impact des variations du paramètre <span class="tt">dice</span> sur les probabilités de victoire du lièvre et de la tortue.
        </li>
      </ol>
      On se place maintenant dans le cadre de la deuxième expérience.
      <ol start="5">
        <li>
          Écrire une fonction <span class="tt">alea(prob, borne)</span> qui prend en arguments une fonction <span class="tt">prob</span> à valeurs positives ou nulles ainsi qu'un entier <span class="tt">borne</span> strictement positif.
          Cette fonction renvoie un entier choisi au hasard parmi 1, 2, &hellip;, <span class="tt">borne</span>&nbsp; la probabilité de tomber sur un entier <span class="tt">n</span> donné doit être proportionnel à <span class="tt">prob(n)</span>.
          <br>
          On supposera que les nombres <span class="tt">prob(1), prob(2), &hellip;, prob(borne)</span> ne sont pas tous nuls.
          Si ce n'est pas le cas, ou si l'élève facétieux choisit une fonction <span class="tt">prob</span> qui ne renvoie pas que des réels positifs ou nuls, la fonction <span class="tt">alea</span> a le droit de faire n'importe quoi.
          <br>
          Si vous ne voyez pas comment faire, n'hésitez pas à sortir un papier et un crayon, et à regarder ce qui se passe lorsque <span class="tt">borne</span> prend de petites valeurs, par exemple 1, 2 ou 3.
          <br>
          Si vous bloquez toujours, appelez votre chargé de TP, montrez-lui ce que vous avez écrit sur votre feuille de papier, et demandez-lui de l'aide.
          Si vous n'avez rien écrit, il ne vous aidera pas.
        </li>
        <li>
          Comment utiliser cette fonction pour simuler le lancer d'un seul dé équilibré à 20 faces&nbsp;?
        </li>
        <li>
          On voit bien qu'il va falloir réécrire intégralement la fonction <span class="tt">étape2</span>&nbsp;: c'est dommage&nbsp;!
          Pour ne plus répéter cette erreur, on va écrire directement une fonction <span class="tt">étape3(randomGenerator,moves)</span> qui prend en arguments
          <ul>
            <li> une fonction <span class="tt">randomGenerator</span>, qui se compotera comme suit&nbsp;: l'instruction <span class="tt">randomGenerator()</span> renvoie un entier <span class="tt">n</span> strictement positif choisi au hasard&nbsp;;</li>
            <li> une fonction <span class="tt">moves</span> qui, étant donné un entier <span class="tt">n</span>, renvoie un tableau <span class="tt">résultat</span> contenant l'avancée du lièvre en position 0, et l'avancée de la tortue en position 1.</li>
          </ul>
          Par exemple, la fonction <span class="tt">étape</span> de l'exercice précédent peut maintenant se réécrire
        <pre>
  const étape = function() {
    return étape3(() => uniforme(20), n => seuil(n,15));
  };</pre>
        </li>
        <li>
          Le lièvre souhaite utiliser un dé truqué où la probabilité de tomber sur un entier <span class="tt">n</span> compris entre 1 et 20 sera proportionnelle à <span class="tt">n</span>.
          En représailles, la tortue décide de choisir le seuil à partir duquel c'est le lièvre qui avance, et en-dessous duquel c'est elle qui avance.
          <br>
          Utiliser les fonctions écrites précédemment pour aider la tortue à choisir le plus petit seuil possible qui lui donnera une grande probabilité de victoire.
        </li>
      </ol>

      <span class="hidden">
      <h3>Exercice 5&nbsp;: There's no magic in this world!</h3>
      <div>
        On souhaite comprendre comment les enseignants ont mis en place le cadre d'exécution utilisé à l'exercice précédent&nbsp;:
        la création des fonctions <span class="tt">print</span> et <span class="tt">newLine</span> et l'interdiction d'utiliser la fonction <span class="tt">console.log</span>.
        <br>
        Ici, il n'y a pas de code à écrire, simplement du code à comprendre.
        Néanmoins, écrire votre propre code pour jouer avec celui que les enseignants ont écrit pourra vous aider à comprendre celui-ci.
      </div>
      <ol>
        <li>Quel script est chargé au début du fichier <a href="src/td05/exo2.html">exo2.html</a>&nbsp;?
        Recopier ce script dans votre répertoire <span class="tt">tp5</span>.
        </li>
        <li>
          Que font les lignes 6, 12 et 14 de ce script&nbsp;?
          On pourra utiliser la <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/throw">documentation</a> du langage Javascript pour comprendre ce que font ces lignes.
        </li>
        <li>Comment s'est-on débrouillé pour interdire l'utilisateur d'appeler lui-même la fonction <span class="tt">console.log</span>&nbsp;?</li>
        <li>Quelle fonction l'utilisateur curieux, qui lirait ce script, pourrait-il utiliser pour afficher lui-même un message dans la console&nbsp;?</li>
        <li>Comment s'est-on débrouillé pour interdire l'utilisateur de rentrer n'importe quel argument dans la fonction <span class="tt">print</span>&nbsp;?</li>
        <li>Expliquer, plus généralement, les codes des fonctions <span class="tt">print</span> et <span class="tt">newLine</span>.</li>
      </ol>
      </span>
      
      <hr>
      <div class="copyright noprint">© Université Gustave Eiffel</div>
    </div>
  </div>
</body>
</html>
